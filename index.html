<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge'>
<title>MS FARMER</title>
<!-- <meta name='viewport' content='width=device-width, initial-scale=1'> -->
<!-- <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<!-- show iframes and the hole page to mobile view like in devtools -->
<meta name="mobile-web-app-capable" content="yes">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    
    <h1>MSFARMER</h1>

    <div id="iframes" class="iframes">

    </div>






<!-- <style>
    iframe {
        width: 414px;
        height: 896px;
    }
</style> -->

<script>

    function chargen(length) {
        let result = '';
        let characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        let charactersLength = characters.length;
        for (let i = 0; i < length; i++) {
            result += characters.charAt(Math.floor(Math.random() * charactersLength));
        }
        return result;
    }


    function createIframe() {
        let chars = chargen(10);
        let a = document.createElement("iframe");
        
        let bingurl = new URL("https://www.bing.com/news/search?q=" + Math.random() + chars);
        a.src = bingurl.href;
        a.id = chars;
        a.classList.add("iframe");

        document.querySelector("#iframes").appendChild(a);
        // reload the iframe
        // a.contentWindow.location.reload(true);
            a.onload = function () {
                window.setTimeout(function () {
                    
                    // a.remove();
                    if (frameToShow != 0) {
                        frameToShow -= 1;
                        console.log(frameToShow);
                        // createIframe();
                    }
                }, 1000);
            }
    }





    const nbIframes = 10;
    let frameToShow = -1;
    for (let i = 0; i < nbIframes; i++) {
        createIframe();
    }

</script>


</body>
</html>